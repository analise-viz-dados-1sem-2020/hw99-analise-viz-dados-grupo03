---
title: "Trabalho Final - R"
author: "Grupo 3 - Bruno Volpini, Dimitri Assis e Lucas Magesty"
date: "15/07/2020"
output: github_document
---

```{r setup, include=FALSE}
library(readr)
library(ggplot2)
library(dplyr)
library(tidyverse)

df <- read.csv("data/SDGData.csv")

knitr::opts_chunk$set(echo = TRUE)
```

# OBJETIVOS DO DESENVOLVIMENTO SUSTENTÁVEL: ANÁLISE DOS DADOS DO BANCO MUNDIAL

## Introdução

Os **Objetivos de Desenvolvimento Sustentável** são uma Agenda da _Organização das Nações Unidas_, composta por 17 objetivos e 169 metas interconectados a serem atingidos até 2030.

Nesta agenda estão previstas ações mundiais nas áreas de erradicação da pobreza, segurança alimentar, agricultura, saúde, educação, igualdade de gênero, redução das desigualdades, energia, água e saneamento, padrões sustentáveis de produção e de consumo, mudança do clima, cidades sustentáveis, proteção e uso sustentável dos oceanos e dos ecossistemas terrestres, crescimento econômico inclusivo, infraestrutura, industrialização, entre outros. [ACESSE O PORTAL DA ONU SOBRE OS ODS](https://www.un.org/sustainabledevelopment/sustainable-development-goals/).

## Descrição da base de dados

A base de dados a ser analisada no relatório foi retirada do Data Catalog do Banco Mundial ([ACESSE NESSE LINK](https://datacatalog.worldbank.org/dataset/sustainable-development-goals)). Na planilha, importada em .csv, há a descrição de 387 indicadores de 213 países, além de regiões do globo (como o Mundo Árabe e a África Subsaariana), blocos econômicos (como a OCDE), divisões econômicas (baixa e alta renda) e todos os continentes, à exceção da Antártida, no período entre 1990 e 2019. Possui, ainda, mais de 3 milhões de células (após leitura) e 32 MB de dados.

```{r, echo=FALSE}
summary(df)
```

### Perguntas Exploratórias

Isso posto, o foco do grupo neste trabalho é analisar, dentre os mais de 387 indicadores disponíveis para os Objetivos de Desenvolvimento Sustentável, 13 indicadores **no eixo** __educação__, em um comparativo Brasil, América Latina e Mundo.

- **Educação (ODS 4)**: o Brasil, comparado com LatAm e Mundo, desenvolveu sua educação nos últimos 30 anos? Se sim, sob quais aspectos?

1) __Children out of school (% of primary school age)__
2) __Literacy rate, adult total (% of people ages 15 and above)__
3) __Literacy rate, youth (ages 15-24), gender parity index (GPI)__
4) __Primary completion rate, female (% of relevant age group)__
5) __Primary completion rate, male (% of relevant age group)__
6) __Primary completion rate, total (% of relevant age group)__
7) __Primary education, duration (years)__
8) __Children in employment, total (% of children ages 7-14)__
9) __Educational attainment, at least Bachelor's or equivalent, population 25+, total (%) (cumulative)__
10) __Educational attainment, at least completed lower secondary, population 25+, total (%) (cumulative)__
11) __Educational attainment, at least completed post-secondary, population 25+, total (%) (cumulative)__
12) __Educational attainment, at least Master's or equivalent, population 25+, total (%) (cumulative)__
13) __Educational attainment, Doctoral or equivalent, population 25+, total (%) (cumulative)__


```{r, echo=FALSE}
#summary(df)

#PRA ANALISAR TEM QUE FAZER O PIVOT LONGER -> TRANSFORMAR AS COLUNAS DE ANO EM LINHAS PARA AS VARIÁVEIS

df<- df %>% 
  pivot_longer(c(-Country.Name, -Country.Code, -Indicator.Name, -Indicator.Code),
               names_to = "Ano",
               values_to = "Valores")
```

## Análise Exploratória

```{r, echo=FALSE , message= FALSE , warning= FALSE}
#código para cada análise
#EXEMPLO:  

# Indicador 1: crianças fora da escola (%)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Children out of school (% of primary school age)") %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group= Country.Name,  col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Crianças fora da escola (% em idade escolar primária)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 2: Literacy rate, adult total (% of people ages 15 and above)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Literacy rate, adult total (% of people ages 15 and above)") %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group= Country.Name,  col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Literacy rate, adult total (% of people ages 15 and above)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 3: Literacy rate, youth (ages 15-24), gender parity index (GPI)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Literacy rate, youth (ages 15-24), gender parity index (GPI)") %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group= Country.Name,  col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Índice", title = "Literacy rate, youth (ages 15-24), gender parity index (GPI)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 4: Primary completion rate, female (% of relevant age group)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Primary completion rate, female (% of relevant age group)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Primary completion rate, female (% of relevant age group)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 5: Primary completion rate, male (% of relevant age group)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Primary completion rate, male (% of relevant age group)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Primary completion rate, male (% of relevant age group)")

```


```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 6: Primary completion rate, total (% of relevant age group)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Primary completion rate, total (% of relevant age group)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Primary completion rate, total (% of relevant age group)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 7: Primary education, duration (years)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Primary education, duration (years)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  labs(y = "Anos", title = "Primary education, duration (years)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 8: Children in employment, total (% of children ages 7-14)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Children in employment, total (% of children ages 7-14)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Children in employment, total (% of children ages 7-14)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 9: Educational attainment, at least Bachelor's or equivalent, population 25+, total (%) (cumulative)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Educational attainment, at least Bachelor's or equivalent, population 25+, total (%) (cumulative)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Educational attainment, at least Bachelor's or equivalent, population 25+, total (%) (cumulative)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 10: Educational attainment, at least completed lower secondary, population 25+, total (%) (cumulative)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Educational attainment, at least completed lower secondary, population 25+, total (%) (cumulative)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Educational attainment, at least completed lower secondary, population 25+, total (%) (cumulative)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 11: Educational attainment, at least completed post-secondary, population 25+, total (%) (cumulative)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Educational attainment, at least completed post-secondary, population 25+, total (%) (cumulative)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Educational attainment, at least completed post-secondary, population 25+, total (%) (cumulative)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 12: Educational attainment, at least Master's or equivalent, population 25+, total (%) (cumulative)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Educational attainment, at least Master's or equivalent, population 25+, total (%) (cumulative)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Educational attainment, at least Master's or equivalent, population 25+, total (%) (cumulative)")

```

```{r, echo=FALSE, message= FALSE , warning= FALSE}

# Indicador 13: Educational attainment, Doctoral or equivalent, population 25+, total (%) (cumulative)

df %>%
  group_by(Indicator.Name) %>%
  filter(Indicator.Name == "Educational attainment, Doctoral or equivalent, population 25+, total (%) (cumulative)" ) %>%
  filter(Country.Code == "BRA" | Country.Code ==  "LCN" | Country.Code == "WLD") %>%
  filter(!is.na(Valores)) %>% 
  ggplot(aes(x = Ano, y = Valores, group = Country.Name, col = Country.Name, fill=Country.Name))  + 
  geom_point() + 
  geom_smooth(span = 0.3) +
  labs(y = "Porcentagem", title = "Educational attainment, Doctoral or equivalent, population 25+, total (%) (cumulative)")

```



## Considerações finais



